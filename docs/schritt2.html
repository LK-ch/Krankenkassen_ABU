<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schritt 2: Franchise verstehen</title>
    
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #7dd3c0;
            min-height: 100vh;
            padding: 20px;
            position: relative;
        }
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('KBild.webp') center/cover fixed;
            opacity: 0.15;
            z-index: -1;
        }
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, rgba(125, 211, 192, 0.95) 0%, rgba(77, 184, 168, 0.95) 100%), url('KBild.webp') center/cover fixed;
            color: white;
            padding: 25px 40px;
            position: relative;
        }
        .back-button {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255, 255, 255, 0.2);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .back-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        header h1 {
            font-size: 1.8em;
            margin-bottom: 5px;
            text-align: center;
        }
        main {
            padding: 40px;
        }
        .task {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 25px;
            border-left: 4px solid #4db8a8;
        }
        .task h2 {
            color: #2d8b7c;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .info-box {
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            color: #e65100;
        }
        textarea, input[type="text"], input[type="number"], select {
            width: 100%;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-size: 1em;
            font-family: inherit;
            margin: 10px 0;
            transition: border-color 0.3s;
        }
        textarea:focus, input:focus, select:focus {
            outline: none;
            border-color: #4db8a8;
        }
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        button {
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px 5px 10px 0;
        }
        .btn-primary {
            background: linear-gradient(135deg, rgba(125, 211, 192, 0.95) 0%, rgba(77, 184, 168, 0.95) 100%), url('KBild.webp') center/cover fixed;
            color: white;
        }
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(212, 163, 115, 0.4);
        }
        .btn-success {
            background: #4CAF50;
            color: white;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }
        th {
            background: #4db8a8;
            color: white;
            font-weight: 600;
        }
        .quiz-option {
            padding: 15px;
            margin: 10px 0;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        .quiz-option:hover {
            border-color: #4db8a8;
            background: #f8f9fa;
        }
        .quiz-option.selected {
            background: #4db8a8;
            color: white;
            border-color: #4db8a8;
        }
        @media (max-width: 768px) {
            main { padding: 20px; }
            header h1 { font-size: 1.5em; }
        }
    </style>

</head>
<body>
    <div class="container">
        <header>
            <a href="index.html" class="back-button">‚Üê Zur√ºck zur √úbersicht</a>
            <h1>Schritt 2: Franchise verstehen</h1>
        </header>

        <main>
            
            <div class="info-box">
                <strong>üéØ In diesem Schritt lernen Sie:</strong> Wie Sie die richtige Franchise f√ºr sich w√§hlen.
            </div>

            <div class="task">
                <h2>ü§î Welche Franchise passt zu Ihnen?</h2>
                <p>Um die richtige Franchise zu w√§hlen, m√ºssen Sie drei wichtige Fragen beantworten:</p>
                
                <div style="margin:20px 0;">
                    <strong>1. Wie ist Ihr allgemeiner Gesundheitszustand?</strong><br>
                    <select id="health_status" style="margin-top:10px;">
                        <option value="">-- W√§hlen Sie --</option>
                        <option value="gesund">Ich bin meistens gesund, max 2x beim Arzt im Jahr</option>
                        <option value="mittel">Ich gehe 3-5x pro Jahr zum Arzt</option>
                        <option value="oft">Ich bin oft beim Arzt / oft krank</option>
                    </select>
                </div>

                <div style="margin:20px 0;">
                    <strong>2. Wie hoch sind Ihre Ersparnisse f√ºr die Krankenkasse?</strong><br>
                    <select id="savings" style="margin-top:10px;">
                        <option value="">-- W√§hlen Sie --</option>
                        <option value="0">0 CHF verf√ºgbar</option>
                        <option value="1000">Etwa 1000 CHF verf√ºgbar</option>
                        <option value="3000">3000 CHF oder mehr verf√ºgbar</option>
                    </select>
                </div>

                <div style="margin:20px 0;">
                    <strong>3. Wie hoch waren Ihre Gesundheitskosten in den letzten Jahren?</strong><br>
                    <input type="number" id="past_costs" placeholder="Betrag in CHF pro Jahr" style="margin-top:10px;">
                </div>

                <button class="btn-success" onclick="calculateFranchise()">üìä Meine passende Franchise berechnen</button>
                
                <div id="franchise_result" style="display:none; margin-top:20px; padding:20px; background:#e8f5e9; border-radius:8px; border-left:4px solid #4CAF50;">
                    <h3 style="color:#2e7d32; margin-bottom:10px;">üéØ Ihre empfohlene Franchise:</h3>
                    <div id="franchise_value" style="font-size:2em; font-weight:bold; color:#1b5e20; margin:15px 0;"></div>
                    <div id="franchise_explanation" style="color:#2e7d32;"></div>
                </div>
            </div>

            <div class="task">
                <h2>üìù Fallbeispiele: Welche Franchise passt?</h2>
                <p>Lesen Sie die folgenden F√§lle und entscheiden Sie, welche Franchise am besten passt:</p>

                <div style="margin:25px 0; padding:20px; background:white; border-radius:8px; border:2px solid #dee2e6;">
                    <strong>Fall 1: Anna, 24 Jahre</strong>
                    <p style="margin:10px 0;">Anna ist Fitnesstrainerin und sehr sportlich. Sie war letztes Jahr nur 1x beim Arzt wegen einer leichten Erk√§ltung. Sie hat 5000 CHF auf dem Sparkonto und m√∂chte monatliche Pr√§mien sparen.</p>
                    <label style="display:block; margin-top:10px;"><strong>Welche Franchise empfehlen Sie?</strong></label>
                    <select id="fall1_franchise" style="margin-top:10px;">
                        <option value="">-- W√§hlen Sie --</option>
                        <option value="300">300 CHF - Niedrige Franchise</option>
                        <option value="1000">1000 CHF - Mittlere Franchise</option>
                        <option value="2500">2500 CHF - Hohe Franchise</option>
                    </select>
                    <div id="fall1_feedback" class="feedback"></div>
                </div>

                <div style="margin:25px 0; padding:20px; background:white; border-radius:8px; border:2px solid #dee2e6;">
                    <strong>Fall 2: Herr Meier, 45 Jahre</strong>
                    <p style="margin:10px 0;">Herr Meier hat Diabetes und muss regelm√§√üig zur Kontrolle (etwa 8x pro Jahr). Er hat nur 500 CHF Notgroschen und arbeitet als Verk√§ufer mit mittlerem Einkommen.</p>
                    <label style="display:block; margin-top:10px;"><strong>Welche Franchise empfehlen Sie?</strong></label>
                    <select id="fall2_franchise" style="margin-top:10px;">
                        <option value="">-- W√§hlen Sie --</option>
                        <option value="300">300 CHF - Niedrige Franchise</option>
                        <option value="1000">1000 CHF - Mittlere Franchise</option>
                        <option value="2500">2500 CHF - Hohe Franchise</option>
                    </select>
                    <div id="fall2_feedback" class="feedback"></div>
                </div>

                <div style="margin:25px 0; padding:20px; background:white; border-radius:8px; border:2px solid #dee2e6;">
                    <strong>Fall 3: Sarah, 28 Jahre</strong>
                    <p style="margin:10px 0;">Sarah ist Grafikdesignerin und geht etwa 3-4x pro Jahr zum Arzt (Routine-Checks, gelegentlich R√ºckenschmerzen). Sie hat 2500 CHF gespart und m√∂chte einen guten Mittelweg finden.</p>
                    <label style="display:block; margin-top:10px;"><strong>Welche Franchise empfehlen Sie?</strong></label>
                    <select id="fall3_franchise" style="margin-top:10px;">
                        <option value="">-- W√§hlen Sie --</option>
                        <option value="300">300 CHF - Niedrige Franchise</option>
                        <option value="1000">1000 CHF - Mittlere Franchise</option>
                        <option value="2500">2500 CHF - Hohe Franchise</option>
                    </select>
                    <div id="fall3_feedback" class="feedback"></div>
                </div>

                <button class="btn-success" onclick="checkCases()">‚úì Fallbeispiele √ºberpr√ºfen</button>
                <div id="cases_overall_feedback" style="margin-top:20px;"></div>
            </div>

            <div class="task">
                <h2>üí≠ Reflexion: Zusammenh√§nge verstehen</h2>
                <p>Erkl√§ren Sie in eigenen Worten: Wie h√§ngen Gesundheitszustand, finanzielle Ressourcen und Franchise-Wahl zusammen?</p>
                <textarea id="franchise_reasoning" rows="5" placeholder="Begr√ºnden Sie die Zusammenh√§nge zwischen Gesundheit, Finanzen und Franchise-Wahl..."></textarea>
            </div>

            <button class="btn-primary" onclick="saveAndContinue()">üíæ Speichern und weiter zu Schritt 3</button>
        
        </main>
    </div>

    <script>
        let progress = JSON.parse(localStorage.getItem('kkLearningProgress')) || {
            completedPoints: [],
            currentPoint: 1,
            answers: {}
        };

        function saveData(key, value) {
            progress.answers[key] = value;
            localStorage.setItem('kkLearningProgress', JSON.stringify(progress));
        }

        function loadData() {
            // Load all saved answers for this step
            const answers = progress.answers;
            for (let key in answers) {
                const element = document.getElementById(key);
                if (element) {
                    element.value = answers[key];
                }
            }
        }

        function saveAndContinue() {
            // Save all inputs on current page
            const inputs = document.querySelectorAll('textarea, input[type="text"], input[type="number"], select');
            inputs.forEach(input => {
                if (input.id) {
                    saveData(input.id, input.value);
                }
            });

            // Mark step as completed
            if (!progress.completedPoints.includes(2)) {
                progress.completedPoints.push(2);
                progress.currentPoint = 3;
                localStorage.setItem('kkLearningProgress', JSON.stringify(progress));
            }

            alert('‚úÖ Schritt 2 abgeschlossen!');
            window.location.href = 'index.html';
        }

        function calculateFranchise() { const health = document.getElementById('health_status').value; const savings = document.getElementById('savings').value; const pastCosts = parseInt(document.getElementById('past_costs').value) || 0; let recommendation = ''; let explanation = ''; if (health === 'oft' || savings === '0') { recommendation = '300 CHF'; explanation = 'Sie gehen oft zum Arzt oder haben wenig R√ºcklagen. Eine niedrige Franchise ist f√ºr Sie am besten.'; } else if (health === 'gesund' && savings === '3000' && pastCosts < 500) { recommendation = '2000 - 2500 CHF'; explanation = 'Sie sind sehr gesund und haben gute R√ºcklagen. Eine hohe Franchise spart Pr√§mien.'; } else { recommendation = '1000 - 1500 CHF'; explanation = 'Eine mittlere Franchise bietet einen guten Kompromiss f√ºr Ihre Situation.'; } document.getElementById('franchise_result').style.display = 'block'; document.getElementById('franchise_value').textContent = recommendation; document.getElementById('franchise_explanation').textContent = explanation; }
        
        function checkCases() {
            const correctAnswers = {
                fall1_franchise: '2500',  // Anna: gesund, gute R√ºcklagen
                fall2_franchise: '300',   // Herr Meier: oft Arzt, wenig Geld
                fall3_franchise: '1000'   // Sarah: mittelm√§√üig
            };

            let allCorrect = true;

            // Fall 1 - Anna
            const fall1 = document.getElementById('fall1_franchise').value;
            const feedback1 = document.getElementById('fall1_feedback');
            if (fall1 === '') {
                feedback1.className = 'feedback incorrect';
                feedback1.textContent = '‚ùå Bitte w√§hlen Sie eine Franchise aus.';
                allCorrect = false;
            } else if (fall1 === correctAnswers.fall1_franchise) {
                feedback1.className = 'feedback correct';
                feedback1.textContent = '‚úì Richtig! Anna ist sehr gesund und hat gute R√ºcklagen ‚Üí hohe Franchise sinnvoll.';
            } else {
                feedback1.className = 'feedback incorrect';
                feedback1.textContent = '‚úó Nicht optimal. Anna ist sehr gesund und hat genug Geld gespart. Welche Franchise w√ºrde Pr√§mien sparen?';
                allCorrect = false;
            }

            // Fall 2 - Herr Meier
            const fall2 = document.getElementById('fall2_franchise').value;
            const feedback2 = document.getElementById('fall2_feedback');
            if (fall2 === '') {
                feedback2.className = 'feedback incorrect';
                feedback2.textContent = '‚ùå Bitte w√§hlen Sie eine Franchise aus.';
                allCorrect = false;
            } else if (fall2 === correctAnswers.fall2_franchise) {
                feedback2.className = 'feedback correct';
                feedback2.textContent = '‚úì Richtig! Herr Meier geht oft zum Arzt und hat wenig R√ºcklagen ‚Üí niedrige Franchise sinnvoll.';
            } else {
                feedback2.className = 'feedback incorrect';
                feedback2.textContent = '‚úó Nicht optimal. Herr Meier hat hohe Arztkosten und wenig Geld gespart. Eine niedrige Franchise ist hier besser.';
                allCorrect = false;
            }

            // Fall 3 - Sarah
            const fall3 = document.getElementById('fall3_franchise').value;
            const feedback3 = document.getElementById('fall3_feedback');
            if (fall3 === '') {
                feedback3.className = 'feedback incorrect';
                feedback3.textContent = '‚ùå Bitte w√§hlen Sie eine Franchise aus.';
                allCorrect = false;
            } else if (fall3 === correctAnswers.fall3_franchise) {
                feedback3.className = 'feedback correct';
                feedback3.textContent = '‚úì Richtig! Sarah ist mittelgesund mit mittleren R√ºcklagen ‚Üí mittlere Franchise ist ein guter Kompromiss.';
            } else {
                feedback3.className = 'feedback incorrect';
                feedback3.textContent = '‚úó Nicht optimal. Sarah braucht einen Mittelweg zwischen Kosten und Sicherheit.';
                allCorrect = false;
            }

            const overallFeedback = document.getElementById('cases_overall_feedback');
            if (allCorrect) {
                overallFeedback.innerHTML = '<div style="background:#d4edda; padding:20px; border-radius:8px; border:2px solid #28a745; color:#155724; font-weight:bold; text-align:center;">üéâ Hervorragend! Sie haben alle F√§lle richtig eingesch√§tzt!</div>';
            } else {
                overallFeedback.innerHTML = '<div style="background:#ecf0f1; padding:15px; border-radius:8px; border:2px solid #e74c3c; color:#856404;">üí° √úberlegen Sie nochmal: Gesundheitszustand + finanzielle Ressourcen = richtige Franchise-Wahl</div>';
            }
        }
        
        

        // Auto-save on input change
        document.addEventListener('DOMContentLoaded', () => {
            loadData();
            const inputs = document.querySelectorAll('textarea, input[type="text"], input[type="number"], select');
            inputs.forEach(input => {
                input.addEventListener('change', () => {
                    if (input.id) {
                        saveData(input.id, input.value);
                    }
                });
            });
        });
    </script>
</body>
</html>
